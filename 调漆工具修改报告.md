# 调漆工具修改报告

* 数据库字段限制问题

**问题描述**：在之前的版本中，由于数据库字段限制问题，若主剂料号长度超过20字符，则无法存入数据库，数据无法保存且无错误提示。

**解决方案**：经反馈，数据库SQL文件建表字段同意由20长度更新为256。

**结果**：问题已解决。

* 关于启动界面加载的问题改进

**问题描述**：在前期版本中，程序以FrmMain（主窗口）作为程序入口，并以模态形式弹出登录窗体。该方式存在的问题在于，由于先加载主窗口隐藏后，再加载登录窗口，会导致页面一闪而过，降低体验。

**解决方案**：程序以登录窗口为入口，登录成功后再进行主窗口加载。

**结果**：问题已解决。

* 关于界面右上角提示文字的改进

**问题描述**：根据需要，需在界面右上角显示欢迎信息。

**解决方案**：通过使用Label实现信息展示。

**结果**：问题已解决。

* 关于记住密码的改进

**问题描述**：每次加载登录窗口时，会进行其他状态的清除，为增强体验，需加入记住密码。

**解决方案**：在登录成功后，若用户选择记住密码，则将用户信息编码后存入注册表：LOCAL_MACHINE\Software\OilPainterSpan\Security\AccountOption\。

**结果**：功能已实现

* 料号维护界面，现有Release版本无法删除选中记录

**问题描述**：选中记录后，选择删除，仅按钮状态发生改变，未删除数据。根据代码分析，代码中确实必要的数据移除代码。

**解决方案**：根据现有数据绑定方案，通过向DataGrid中数据源中删除选中行，以实现数据删除。

**结果**：问题已解决

* 料号排序问题

**问题描述**：由于料号数据较多，数据未进行初始排序显示，数据杂乱。

**解决方案**：通过借助SQL优化，加入ORDER BY进行默认排序，默认以‘客户名称’进行升序排列。

**结果**：问题已解决，符合预期排序效果。

* 料号维护，部分客户名不显示问题

**问题描述**：点击ABC、DCB等客户用料时，在信息显示中，未显示客户名。具体情况如图：

![客户名称不显示](C:\Users\Frank\Pictures\markdown\调漆工具报告\客户名称不显示.png)

**解决方案**：经过检查，原因在于Combobox中不存在该客户名记录，无法通过Text属性设置并显示，数据库不完善，增加相应数据记录，已改进现有SQL。

**结果**：问题已解决。

* 增加BOM用料时，刷新数据

**问题描述**：在进行BOM添加时，若添加成功，并保存时，系统显示界面会进行刷新操作，导致体验不佳。

**解决方案**：使用局部添加的方式，在SQL执行成功后，仅更新一条记录到数据源，不做整个数据源的重新绑定，避免刷新。

**结果**：问题已解决，实现局部增加。